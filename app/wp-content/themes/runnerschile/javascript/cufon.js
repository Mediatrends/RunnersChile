var Cufon=function(){function a(a){var b=this.face=a.face,c={" ":1," ":1,"　":1};this.glyphs=function(a){var b,c={"‑":"-","­":"‑"};for(b in c)l(c,b)&&(a[b]||(a[b]=a[c[b]]));return a}(a.glyphs),this.w=a.w,this.baseSize=parseInt(b["units-per-em"],10),this.family=b["font-family"].toLowerCase(),this.weight=b["font-weight"],this.style=b["font-style"]||"normal",this.viewBox=function(){var a=b.bbox.split(/\s+/),c={minX:parseInt(a[0],10),minY:parseInt(a[1],10),maxX:parseInt(a[2],10),maxY:parseInt(a[3],10)};return c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,c.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")},c}(),this.ascent=-parseInt(b.ascent,10),this.descent=-parseInt(b.descent,10),this.height=-this.ascent+this.descent,this.spacing=function(a,b,d){for(var e,f,g,h,i,j=this.glyphs,k=[],l=0,m=-1,n=-1;i=a[++m];)e=j[i]||this.missingGlyph,e&&(f&&(l-=g=f[i]||0,k[n]-=g),h=e.w,isNaN(h)&&(h=+this.w),h>0&&(h+=b,c[i]&&(h+=d)),l+=k[++n]=~~h,f=e.k);return k.total=l,k}}function b(){var a={},b={oblique:"italic",italic:"oblique"};this.add=function(b){(a[b.style]||(a[b.style]={}))[b.weight]=b},this.get=function(c,d){var e=a[c]||a[b[c]]||a.normal||a.italic||a.oblique;if(!e)return null;if(d={normal:400,bold:700}[d]||parseInt(d,10),e[d])return e[d];var f,g,h={1:1,99:0}[d%100],i=[];void 0===h&&(h=d>400),500==d&&(d=400);for(var j in e)l(e,j)&&(j=parseInt(j,10),(!f||f>j)&&(f=j),(!g||j>g)&&(g=j),i.push(j));return f>d&&(d=f),d>g&&(d=g),i.sort(function(a,b){return(h?a>=d&&b>=d?b>a:a>b:d>=a&&d>=b?a>b:b>a)?-1:1}),e[i[0]]}}function c(){function a(a,b){try{return a.contains?a.contains(b):16&a.compareDocumentPosition(b)}catch(c){}return!1}function b(b){var c=b.relatedTarget;c&&a(this,c)||d(this,"mouseover"==b.type)}function c(a){a||(a=window.event),d(a.target||a.srcElement,"mouseenter"==a.type)}function d(a,b){setTimeout(function(){var c=B.get(a).options;b&&(c=m(c,c.hover),c._mediatorMode=1),s.replace(a,c,!0)},10)}this.attach=function(a){void 0===a.onmouseenter?(g(a,"mouseover",b),g(a,"mouseout",b)):(g(a,"mouseenter",c),g(a,"mouseleave",c))},this.detach=function(a){void 0===a.onmouseenter?(o(a,"mouseover",b),o(a,"mouseout",b)):(o(a,"mouseenter",c),o(a,"mouseleave",c))}}function d(){function a(a){for(var d,e=[],f=0;d=a[f];++f)e[f]=b[c[d]];return e}var b=[],c={};this.add=function(a,d){c[a]=b.push(d)-1},this.repeat=function(){for(var c,d=arguments.length?a(arguments):b,e=0;c=d[e++];)s.replace(c[0],c[1],!0)}}function e(){function a(a){return a.cufid||(a.cufid=++c)}var b={},c=0;this.get=function(c){var d=a(c);return b[d]||(b[d]={})}}function f(a){var b={},c={};this.extend=function(a){for(var c in a)l(a,c)&&(b[c]=a[c]);return this},this.get=function(c){return void 0!=b[c]?b[c]:a[c]},this.getSize=function(a,b){return c[a]||(c[a]=new u.Size(this.get(a),b))},this.isUsable=function(){return!!a}}function g(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function h(a,b){if(b._mediatorMode)return a;var c=B.get(a),d=c.options;if(d){if(d===b)return a;d.hover&&C.detach(a)}return b.hover&&b.hoverables[a.nodeName.toLowerCase()]&&C.attach(a),c.options=b,a}function i(a){var b={};return function(c){return l(b,c)||(b[c]=a.apply(null,arguments)),b[c]}}function j(a,b){for(var c,d=u.quotedList(b.get("fontFamily").toLowerCase()),e=0;c=d[e];++e)if(I[c])return I[c].get(b.get("fontStyle"),b.get("fontWeight"));return null}function k(a){return document.getElementsByTagName(a)}function l(a,b){return a.hasOwnProperty(b)}function m(){for(var a,b,c={},d=0,e=arguments.length;a=arguments[d],e>d;++d)for(b in a)l(a,b)&&(c[b]=a[b]);return c}function n(a,b,c,d,e,f){var g,h=document.createDocumentFragment();if(""===b)return h;var i=d.separate,j=b.split(K[i]),k="words"==i;k&&w&&(/^\s/.test(b)&&j.unshift(""),/\s$/.test(b)&&j.push(""));for(var l=0,m=j.length;m>l;++l)g=H[d.engine](a,k?u.textAlign(j[l],c,l,m):j[l],c,d,e,f,m-1>l),g&&h.appendChild(g);return h}function o(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function p(a,b){var c=a.nodeName.toLowerCase();if(!(b.ignore[c]||b.ignoreClass&&b.ignoreClass.test(a.className))){b.onBeforeReplace&&b.onBeforeReplace(a,b);var d=!b.textless[c],e="simple"===b.trim,f=u.getStyle(h(a,b)).extend(b);if(0!==parseFloat(f.get("fontSize"))){var i,k,l,m,o,p,s,t,v=j(a,f),w=b.softHyphens,x=!1,z=/\u00ad/g,A=b.modifyText;if(v){for(i=a.firstChild;i;i=l)k=i.nodeType,l=i.nextSibling,d&&3==k&&(w&&a.nodeName.toLowerCase()!=y&&(s=i.data.indexOf("­"),s>=0&&(i.splitText(s),l=i.nextSibling,l.deleteData(0,1),t=document.createElement(y),t.appendChild(document.createTextNode("­")),a.insertBefore(t,l),l=t,x=!0)),m?(m.appendData(i.data),a.removeChild(i)):m=i,l)||(m&&(o=m.data,w||(o=o.replace(z,"")),o=u.whiteSpace(o,f,m,p,e),A&&(o=A(o,m,a,b)),a.replaceChild(n(v,o,f,b,i,a),m),m=null),1==k&&(i.firstChild&&("cufon"==i.nodeName.toLowerCase()?H[b.engine](v,null,f,b,i,a):arguments.callee(i,b)),p=i));w&&x&&(q(a),F||g(window,"resize",r),F=!0),b.onAfterReplace&&b.onAfterReplace(a,b)}}}}function q(a){var b,c,d,e,f,g,h,i;for(b=a.getElementsByTagName(y),i=0;c=b[i];++i)if(c.className=z,e=d=c.parentNode,e.nodeName.toLowerCase()!=x)f=document.createElement(x),f.appendChild(c.previousSibling),d.insertBefore(f,c),f.appendChild(c);else if(e=e.parentNode,e.nodeName.toLowerCase()==x){for(d=e.parentNode;e.firstChild;)d.insertBefore(e.firstChild,e);d.removeChild(e)}for(i=0;c=b[i];++i)c.className="",e=c.parentNode,d=e.parentNode,g=e.nextSibling||d.nextSibling,h=g.nodeName.toLowerCase()==x?e:c.previousSibling,h.offsetTop>=g.offsetTop&&(c.className=z,h.offsetTop<g.offsetTop&&(f=document.createElement(x),d.insertBefore(f,e),f.appendChild(e),f.appendChild(g)))}function r(){G||(u.addClass(t.root(),A),clearTimeout(v),v=setTimeout(function(){G=!0,u.removeClass(t.root(),A),q(document),G=!1},100))}var s=function(){return s.replace.apply(null,arguments)},t=s.DOM={ready:function(){var a=!1,b={loaded:1,complete:1},c=[],d=function(){if(!a){a=!0;for(var b;b=c.shift();b());}};return document.addEventListener&&(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("pageshow",d,!1)),!window.opera&&document.readyState&&function(){b[document.readyState]?d():setTimeout(arguments.callee,10)}(),document.readyState&&document.createStyleSheet&&function(){try{document.body.doScroll("left"),d()}catch(a){setTimeout(arguments.callee,1)}}(),g(window,"load",d),function(b){arguments.length?a?b():c.push(b):d()}}(),root:function(){return document.documentElement||document.body},strict:function(){var a;return"BackCompat"==document.compatMode?!1:(a=document.doctype)?!/frameset|transitional/i.test(a.publicId):(a=document.firstChild,8!=a.nodeType||/^DOCTYPE.+(transitional|frameset)/i.test(a.data)?!1:!0)}()},u=s.CSS={Size:function(a,b){this.value=parseFloat(a),this.unit=String(a).match(/[a-z%]*$/)[0]||"px",this.convert=function(a){return a/b*this.value},this.convertFrom=function(a){return a/this.value*b},this.toString=function(){return this.value+this.unit}},addClass:function(a,b){var c=a.className;return a.className=c+(c&&" ")+b,a},color:i(function(a){var b={};return b.color=a.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(a,c,d){return b.opacity=parseFloat(d),"rgb("+c+")"}),b}),fontStretch:i(function(a){return"number"==typeof a?a:/%$/.test(a)?parseFloat(a)/100:{"ultra-condensed":.5,"extra-condensed":.625,condensed:.75,"semi-condensed":.875,"semi-expanded":1.125,expanded:1.25,"extra-expanded":1.5,"ultra-expanded":2}[a]||1}),getStyle:function(a){var b=document.defaultView;return new f(b&&b.getComputedStyle?b.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style)},gradient:i(function(a){for(var b,c={id:a,type:a.match(/^-([a-z]+)-gradient\(/)[1],stops:[]},d=a.substr(a.indexOf("(")).match(/([\d.]+=)?(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)/gi),e=0,f=d.length;f>e;++e)b=d[e].split("=",2).reverse(),c.stops.push([b[1]||e/(f-1),b[0]]);return c}),quotedList:i(function(a){for(var b,c=[],d=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g;b=d.exec(a);)c.push(b[3]||b[1]);return c}),recognizesMedia:i(function(a){var b,c,d,e=document.createElement("style");e.type="text/css",e.media=a;try{e.appendChild(document.createTextNode("/**/"))}catch(f){}return c=k("head")[0],c.insertBefore(e,c.firstChild),b=e.sheet||e.styleSheet,d=b&&!b.disabled,c.removeChild(e),d}),removeClass:function(a,b){var c=RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","g");return a.className=a.className.replace(c,""),a},supports:function(a,b){var c=document.createElement("span").style;return void 0===c[a]?!1:(c[a]=b,c[a]===b)},textAlign:function(a,b,c,d){return"right"==b.get("textAlign")?c>0&&(a=" "+a):d-1>c&&(a+=" "),a},textShadow:i(function(a){if("none"==a)return null;for(var b,c=[],d={},e=0,f=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/gi;b=f.exec(a);)","==b[0]?(c.push(d),d={},e=0):b[1]?d.color=b[1]:d[["offX","offY","blur"][e++]]=b[2];return c.push(d),c}),textTransform:function(){var a={uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},capitalize:function(a){return a.replace(/(?:^|\s)./g,function(a){return a.toUpperCase()})}};return function(b,c){var d=a[c.get("textTransform")];return d?d(b):b}}(),whiteSpace:function(){var a={inline:1,"inline-block":1,"run-in":1},b=/^\s+/,c=/\s+$/;return function(d,e,f,g,h){return h?d.replace(b,"").replace(c,""):(g&&"br"==g.nodeName.toLowerCase()&&(d=d.replace(b,"")),a[e.get("display")]?d:(f.previousSibling||(d=d.replace(b,"")),f.nextSibling||(d=d.replace(c,"")),d))}}()};u.ready=function(){function a(a){return j[a.type.toLowerCase()]?a.disabled||b(a.sheet,a.media||"screen"):!0}function b(a,c){if(!u.recognizesMedia(c||"all"))return!0;if(!a||a.disabled)return!1;try{var d,e=a.cssRules;if(e)a:for(var f=0,g=e.length;d=e[f],g>f;++f)switch(d.type){case 2:break;case 3:if(!b(d.styleSheet,d.media.mediaText))return!1;break;default:break a}}catch(h){}return!0}function c(){if(document.createStyleSheet)return!0;var b,c;for(c=0;b=h[c];++c)if("stylesheet"==b.rel.toLowerCase()&&!a(b))return!1;for(c=0;b=i[c];++c)if(!a(b))return!1;return!0}var d=!u.recognizesMedia("all"),e=!1,f=[],g=function(){d=!0;for(var a;a=f.shift();a());},h=k("link"),i=k("style"),j={"":1,"text/css":1};return t.ready(function(){e||(e=u.getStyle(document.body).isUsable()),d||e&&c()?g():setTimeout(arguments.callee,10)}),function(a){d?a():f.push(a)}}();var v,w=0==" ".split(/\s+/).length,x="cufonglue",y="cufonshy",z="cufon-shy-disabled",A="cufon-viewport-resizing",B=new e,C=new c,D=new d,E=!1,F=!1,G=!1,H={},I={},J={autoDetect:!1,engine:null,forceHitArea:!1,hover:!1,hoverables:{a:!0},ignore:{applet:1,canvas:1,col:1,colgroup:1,head:1,iframe:1,map:1,noscript:1,optgroup:1,option:1,script:1,select:1,style:1,textarea:1,title:1,pre:1},ignoreClass:null,modifyText:null,onAfterReplace:null,onBeforeReplace:null,printable:!0,selector:window.Sizzle||window.jQuery&&function(a){return jQuery(a)}||window.dojo&&dojo.query||window.glow&&glow.dom&&glow.dom.get||window.Ext&&Ext.query||window.YAHOO&&YAHOO.util&&YAHOO.util.Selector&&YAHOO.util.Selector.query||window.$$&&function(a){return $$(a)}||window.$&&function(a){return $(a)}||document.querySelectorAll&&function(a){return document.querySelectorAll(a)}||k,separate:"words",softHyphens:!0,textless:{dl:1,html:1,ol:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,ul:1},textShadow:"none",trim:"advanced"},K={words:/\s/.test(" ")?/[^\S\u00a0]+/:/\s+/,characters:"",none:/^/};return s.now=function(){return t.ready(),s},s.refresh=function(){return D.repeat.apply(D,arguments),s},s.registerEngine=function(a,b){return b?(H[a]=b,s.set("engine",a)):s},s.registerFont=function(c){if(!c)return s;var d=new a(c),e=d.family;return I[e]||(I[e]=new b),I[e].add(d),s.set("fontFamily",'"'+e+'"')},s.hasFont=function(a){return I[a.toLowerCase()]?!0:!1},s.replace=function(a,b,c){return b=m(J,b),b.engine?(E||(u.addClass(t.root(),"cufon-active cufon-loading"),u.ready(function(){u.addClass(u.removeClass(t.root(),"cufon-loading"),"cufon-ready")}),E=!0),b.hover&&(b.forceHitArea=!0),b.autoDetect&&delete b.fontFamily,"string"==typeof b.ignoreClass&&(b.ignoreClass=new RegExp("(?:^|\\s)(?:"+b.ignoreClass.replace(/\s+/g,"|")+")(?:\\s|$)")),"string"==typeof b.textShadow&&(b.textShadow=u.textShadow(b.textShadow)),"string"==typeof b.color&&/^-/.test(b.color)?b.textGradient=u.gradient(b.color):delete b.textGradient,"string"==typeof a?(c||D.add(a,arguments),a=[a]):a.nodeType&&(a=[a]),u.ready(function(){for(var c=0,d=a.length;d>c;++c){var e=a[c];"string"==typeof e?s.replace(b.selector(e),b,!0):p(e,b)}}),s):s},s.set=function(a,b){return J[a]=b,s},s}();Cufon.registerEngine("vml",function(){function a(a,c){return b(a,/(?:em|ex|%)$|^[a-z-]+$/i.test(c)?"1em":c)}function b(a,b){if(!isNaN(b)||/px$/i.test(b))return parseFloat(b);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,a.style.left=b.replace("%","em");var e=a.style.pixelLeft;return a.style.left=c,a.runtimeStyle.left=d,e}function c(a,c,d,e){var f="computed"+e,g=c[f];return isNaN(g)&&(g=c.get(e),c[f]=g="normal"==g?0:~~d.convertFrom(b(a,g))),g}function d(a){var b=a.id;if(!h[b]){var c=a.stops,d=document.createElement("cvml:fill"),e=[];d.type="gradient",d.angle=180,d.focus="0",d.method="none",d.color=c[0][1];for(var f=1,g=c.length-1;g>f;++f)e.push(100*c[f][0]+"% "+c[f][1]);d.colors=e.join(","),d.color2=c[g][1],h[b]=d}return h[b]}var e=document.namespaces;if(e){e.add("cvml","urn:schemas-microsoft-com:vml"),e=null;var f=document.createElement("cvml:shape");if(f.style.behavior="url(#default#VML)",f.coordsize){f=null;var g=(document.documentMode||0)<8;document.write(('<style type="text/css">cufoncanvas{text-indent:0;}@media screen{cvml\\:shape,cvml\\:rect,cvml\\:fill,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute;}cufoncanvas{position:absolute;text-align:left;}cufon{display:inline-block;position:relative;vertical-align:'+(g?"middle":"text-bottom")+";}cufon cufontext{position:absolute;left:-10000in;font-size:1px;text-align:left;}cufonshy.cufon-shy-disabled,.cufon-viewport-resizing cufonshy{display:none;}cufonglue{white-space:nowrap;display:inline-block;}.cufon-viewport-resizing cufonglue{white-space:normal;}a cufon{cursor:pointer}}@media print{cufon cufoncanvas{display:none;}}</style>").replace(/;/g,"!important;"));var h={};return function(e,f,h,i,j,k,l){var m=null===f;m&&(f=j.alt);var n,o,p=e.viewBox,q=h.computedFontSize||(h.computedFontSize=new Cufon.CSS.Size(a(k,h.get("fontSize"))+"px",e.baseSize));if(m)n=j,o=j.firstChild;else{if(n=document.createElement("cufon"),n.className="cufon cufon-vml",n.alt=f,o=document.createElement("cufoncanvas"),n.appendChild(o),i.printable){var r=document.createElement("cufontext");r.appendChild(document.createTextNode(f)),n.appendChild(r)}l||n.appendChild(document.createElement("cvml:shape"))}var s=n.style,t=o.style,u=q.convert(p.height),v=Math.ceil(u),w=v/u,x=w*Cufon.CSS.fontStretch(h.get("fontStretch")),y=p.minX,z=p.minY;t.height=v,t.top=Math.round(q.convert(z-e.ascent)),t.left=Math.round(q.convert(y)),s.height=q.convert(e.height)+"px";var A=h.get("color"),B=Cufon.CSS.textTransform(f,h).split(""),C=e.spacing(B,c(k,h,q,"letterSpacing"),c(k,h,q,"wordSpacing"));if(!C.length)return null;for(var D,E,F=C.total,G=-y+F+(p.width-C[C.length-1]),H=q.convert(G*x),I=Math.round(H),J=G+","+p.height,K="r"+J+"ns",L=i.textGradient&&d(i.textGradient),M=e.glyphs,N=0,O=i.textShadow,P=-1,Q=0;E=B[++P];){var R,S=M[B[P]]||e.missingGlyph;if(S){if(m)for(R=o.childNodes[Q];R.firstChild;)R.removeChild(R.firstChild);else R=document.createElement("cvml:shape"),o.appendChild(R);R.stroked="f",R.coordsize=J,R.coordorigin=D=y-N+","+z,R.path=(S.d?"m"+S.d+"xe":"")+"m"+D+K,R.fillcolor=A,L&&R.appendChild(L.cloneNode(!1));var T=R.style;if(T.width=I,T.height=v,O){var U,V=O[0],W=O[1],X=Cufon.CSS.color(V.color),Y=document.createElement("cvml:shadow");Y.on="t",Y.color=X.color,Y.offset=V.offX+","+V.offY,W&&(U=Cufon.CSS.color(W.color),Y.type="double",Y.color2=U.color,Y.offset2=W.offX+","+W.offY),Y.opacity=X.opacity||U&&U.opacity||1,R.appendChild(Y)}N+=C[Q++]}}var Z,$,_=R.nextSibling;if(i.forceHitArea?(_||(_=document.createElement("cvml:rect"),_.stroked="f",_.className="cufon-vml-cover",Z=document.createElement("cvml:fill"),Z.opacity=0,_.appendChild(Z),o.appendChild(_)),$=_.style,$.width=I,$.height=v):_&&o.removeChild(_),s.width=Math.max(Math.ceil(q.convert(F*x)),0),g){var ab=h.computedYAdjust;if(void 0===ab){var bb=h.get("lineHeight");"normal"==bb?bb="1em":isNaN(bb)||(bb+="em"),h.computedYAdjust=ab=.5*(b(k,bb)-parseFloat(s.height))}ab&&(s.marginTop=Math.ceil(ab)+"px",s.marginBottom=ab+"px")}return n}}}}()),Cufon.registerEngine("canvas",function(){function a(a,b){var c,d=0,e=0,f=[],g=/([mrvxe])([^a-z]*)/g;a:for(var h=0;c=g.exec(a);++h){var i=c[2].split(",");switch(c[1]){case"v":f[h]={m:"bezierCurveTo",a:[d+~~i[0],e+~~i[1],d+~~i[2],e+~~i[3],d+=~~i[4],e+=~~i[5]]};break;case"r":f[h]={m:"lineTo",a:[d+=~~i[0],e+=~~i[1]]};break;case"m":f[h]={m:"moveTo",a:[d=~~i[0],e=~~i[1]]};break;case"x":f[h]={m:"closePath"};break;case"e":break a}b[f[h].m].apply(b,f[h].a)}return f}function b(a,b){for(var c=0,d=a.length;d>c;++c){var e=a[c];b[e.m].apply(b,e.a)}}var c=document.createElement("canvas");if(c&&c.getContext&&c.getContext.apply){c=null;var d=Cufon.CSS.supports("display","inline-block"),e=!d&&("BackCompat"==document.compatMode||/frameset|transitional/i.test(document.doctype.publicId)),f=document.createElement("style");return f.type="text/css",f.appendChild(document.createTextNode(("cufon{text-indent:0;}@media screen,projection{cufon{display:inline;display:inline-block;position:relative;vertical-align:middle;"+(e?"":"font-size:1px;line-height:1px;")+"}cufon cufontext{display:-moz-inline-box;display:inline-block;width:0;height:0;text-align:left;text-indent:-10000in;}"+(d?"cufon canvas{position:relative;}":"cufon canvas{position:absolute;}")+"cufonshy.cufon-shy-disabled,.cufon-viewport-resizing cufonshy{display:none;}cufonglue{white-space:nowrap;display:inline-block;}.cufon-viewport-resizing cufonglue{white-space:normal;}}@media print{cufon{padding:0;}cufon canvas{display:none;}}").replace(/;/g,"!important;"))),document.getElementsByTagName("head")[0].appendChild(f),function(c,e,f,g,h){function i(){var d,e,f=c.glyphs,g=-1,h=-1;for(M.scale(H,1);e=w[++g];){var d=f[w[g]]||c.missingGlyph;d&&(d.d&&(M.beginPath(),d.code?b(d.code,M):d.code=a("m"+d.d,M),M.fill()),M.translate(x[++h],0))}M.restore()}var j=null===e;j&&(e=h.getAttribute("alt"));var k=c.viewBox,l=f.getSize("fontSize",c.baseSize),m=0,n=0,o=0,p=0,q=g.textShadow,r=[];if(q)for(var s=q.length;s--;){var t=q[s],u=l.convertFrom(parseFloat(t.offX)),v=l.convertFrom(parseFloat(t.offY));r[s]=[u,v],m>v&&(m=v),u>n&&(n=u),v>o&&(o=v),p>u&&(p=u)}var w=Cufon.CSS.textTransform(e,f).split(""),x=c.spacing(w,~~l.convertFrom(parseFloat(f.get("letterSpacing"))||0),~~l.convertFrom(parseFloat(f.get("wordSpacing"))||0));if(!x.length)return null;var y=x.total;n+=k.width-x[x.length-1],p+=k.minX;var z,A;if(j)z=h,A=h.firstChild;else if(z=document.createElement("cufon"),z.className="cufon cufon-canvas",z.setAttribute("alt",e),A=document.createElement("canvas"),z.appendChild(A),g.printable){var B=document.createElement("cufontext");B.appendChild(document.createTextNode(e)),z.appendChild(B)}var C=z.style,D=A.style,E=l.convert(k.height),F=Math.ceil(E),G=F/E,H=G*Cufon.CSS.fontStretch(f.get("fontStretch")),I=y*H,J=Math.ceil(l.convert(I+n-p)),K=Math.ceil(l.convert(k.height-m+o));A.width=J,A.height=K,D.width=J+"px",D.height=K+"px",m+=k.minY,D.top=Math.round(l.convert(m-c.ascent))+"px",D.left=Math.round(l.convert(p))+"px";var L=Math.max(Math.ceil(l.convert(I)),0)+"px";d?(C.width=L,C.height=l.convert(c.height)+"px"):(C.paddingLeft=L,C.paddingBottom=l.convert(c.height)-1+"px");var M=A.getContext("2d"),N=E/k.height;if(M.scale(N,N*G),M.translate(-p,-m),M.save(),q)for(var s=q.length;s--;){var t=q[s];M.save(),M.fillStyle=t.color,M.translate.apply(M,r[s]),i()}var O=g.textGradient;if(O){for(var P=O.stops,Q=M.createLinearGradient(0,k.minY,0,k.maxY),s=0,R=P.length;R>s;++s)Q.addColorStop.apply(Q,P[s]);M.fillStyle=Q}else M.fillStyle=f.get("color");return i(),z}}}());